# Implementation Plan
**Generated**: 2026-01-01 00:15 PST
**Generated By**: Scout-and-Plan Agent (combined workflow)
**Task ID**: GitHub Issue #19
**Estimated Build Time**: 1-2 hours
**Complexity**: Low-Medium

## Investigation Summary

### Request Analysis
**Type**: Performance Optimization
**Source**: GitHub Issue #19
**Priority**: Medium (labeled medium-priority, SEO, performance)

### Task Classification
**Category**: PERFORMANCE / SEO
**Test Strategy**: STANDARD - Build + lint + visual verification

### Current State Assessment
- **Files to modify**: `index.html` (preload hints, font optimization)
- **Images verified**: All images have explicit width/height attributes (Issue #15 already completed)
- **Font loading**: Currently using standard Google Fonts link with `display=swap`
- **No preload hints**: Currently no preload directives for critical assets
- **Build status**: Passing (verified)
- **Lint status**: Passing (verified)

### Complexity Assessment
**Complexity**: Low-Medium
**Effort**: 1-2 hours
**Risk**: Low - changes are additive and non-breaking

### Key Findings

#### 1. Critical Assets Identified
**Hero Image** (LCP candidate):
- Path: `/images/hero/portland-ai-consulting-hero.jpg` (546KB)
- Used in hero section background via CSS
- No WebP variant exists for hero (only JPG)

**Navigation Logo** (above-fold, critical):
- Path: `/images/logos/logo-nav.webp` (5KB)
- Fallback: `/images/logos/logo-nav.png` (28KB)
- Has explicit dimensions: width="200" height="109"

#### 2. Font Loading Status
Current implementation (line 29-32 in index.html):
```html
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
```
- Already has preconnect directives (good)
- Already uses `display=swap` (good for FOIT prevention)
- Could benefit from font-display optimization technique

#### 3. Image Dimensions Already Set (Issue #15)
All images in App.jsx have explicit width/height attributes:
- Nav logo: 200x109
- Confidential AI image: 1408x768
- FAQ section image: 1408x768
- Contact section image: 1408x768
- Footer logo: 300x163

#### 4. Render-Blocking Resources
- Google Tag Manager script at top of `<head>` (lines 4-10) - necessary for tracking
- Google Fonts stylesheet - can be optimized

---

## Executive Summary
This plan implements Core Web Vitals optimizations for the AI Ready PDX marketing website. The main changes are:
1. Add preload hints for critical above-the-fold assets (hero image, nav logo)
2. Optimize font loading to reduce render-blocking impact
3. Add fetchpriority attribute guidance for LCP image

These are safe, additive changes that will improve LCP and CLS scores without changing site functionality.

---

## Phase 1: Add Preload Hints for Critical Assets

### Subtask 1.1: Add Preload for Hero Background Image
**File**: `/home/pbrown/aireadypdx/index.html`
**Location**: After line 32 (after font stylesheet)
**Pattern**: Standard resource preloading

**Instructions**:
1. Add preload link for the hero background image (LCP candidate)
2. Place after the font stylesheet link for proper ordering

**Code to add after line 32**:
```html
    <!-- Preload critical above-the-fold images for LCP optimization -->
    <link rel="preload" href="/images/hero/portland-ai-consulting-hero.jpg" as="image">
```

**Validation**:
```bash
npm run build
npm run lint
```

**Completion Criteria**:
- [ ] Preload link added to index.html
- [ ] Build passes
- [ ] Lint passes

---

### Subtask 1.2: Add Preload for Navigation Logo
**File**: `/home/pbrown/aireadypdx/index.html`
**Location**: After the hero image preload (new line 34)
**Pattern**: WebP image preloading with type hint

**Instructions**:
1. Add preload for the navigation logo WebP (above-fold, visible immediately)
2. Include type attribute for WebP format hint

**Code to add after hero preload**:
```html
    <link rel="preload" href="/images/logos/logo-nav.webp" as="image" type="image/webp">
```

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] Logo preload link added
- [ ] Build passes

---

## Phase 2: Optimize Font Loading

### Subtask 2.1: Add Font Display Optimization
**File**: `/home/pbrown/aireadypdx/index.html`
**Location**: Lines 29-32 (existing font links)
**Pattern**: Optional print/swap technique for non-blocking fonts

**Instructions**:
The current implementation already uses `display=swap` which is good. For additional optimization, we can add a `preload` hint for the font file itself. However, since Google Fonts dynamically determines the best font file based on browser, the current setup is already near-optimal.

**Alternative approach** - Add DNS prefetch for additional Google domains:
After line 31, verify that preconnect is sufficient or add dns-prefetch as fallback:

The current setup is already well-optimized with:
- `rel="preconnect"` for fonts.googleapis.com
- `rel="preconnect" crossorigin` for fonts.gstatic.com
- `display=swap` in the font URL

**Recommendation**: No changes needed to font loading - already optimized.

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] Font loading verified as optimal
- [ ] No changes needed (document this)

---

## Phase 3: Add fetchpriority Hint for LCP Image (Optional Enhancement)

### Subtask 3.1: Document fetchpriority for Hero Image
**File**: `/home/pbrown/aireadypdx/src/App.jsx` or CSS background
**Status**: The hero image is applied via CSS background-image, not an `<img>` tag

**Instructions**:
The hero background is applied in `src/index.css` lines 315-320:
```css
.hero {
  background:
    linear-gradient(135deg, rgba(11, 61, 46, 0.85) 0%, rgba(31, 58, 95, 0.8) 100%),
    url('/images/hero/portland-ai-consulting-hero.jpg');
  background-size: cover;
  ...
}
```

Since this is a CSS background-image, we cannot add `fetchpriority="high"`. The preload hint from Subtask 1.1 is the correct solution for this case.

**Recommendation**: No code changes needed - preload is the correct approach for CSS backgrounds.

**Validation**: N/A

**Completion Criteria**:
- [ ] Documented that hero is CSS background
- [ ] Preload is the correct optimization (done in 1.1)

---

## Phase 4: Create WebP Hero Image (Future Enhancement)

### Subtask 4.1: Document Hero WebP Opportunity
**Status**: NOT IMPLEMENTED - Requires manual image conversion

**Current State**:
- Hero image only has JPG format: `portland-ai-consulting-hero.jpg` (546KB)
- Other images have WebP variants

**Recommendation for Future**:
1. Convert hero JPG to WebP format
2. Update CSS to use image-set() or add picture element approach
3. Update preload to use WebP

This is a future enhancement that requires image conversion tooling and more significant CSS changes.

**Completion Criteria**:
- [ ] Documented as future enhancement
- [ ] Not blocking current implementation

---

## Summary of Deliverables

### Files Modified
1. `/home/pbrown/aireadypdx/index.html` - Add preload hints

### Final index.html Changes (lines 32-35)
After the font stylesheet, add:
```html
    <!-- Preload critical above-the-fold images for LCP optimization -->
    <link rel="preload" href="/images/hero/portland-ai-consulting-hero.jpg" as="image">
    <link rel="preload" href="/images/logos/logo-nav.webp" as="image" type="image/webp">
```

---

## Handoff to Build Agent

1. Execute subtasks in exact order (1.1, 1.2)
2. Phase 2 requires no changes - already optimized
3. Phase 3 requires no changes - documented only
4. Phase 4 is future enhancement - not part of this build
5. Run final validation:
```bash
npm run build && npm run lint
```
6. Verify build completes successfully

---

## Post-Deployment Recommendations

After the site is live, perform actual Core Web Vitals testing:

1. **PageSpeed Insights**: https://pagespeed.web.dev/
   - Test both mobile and desktop
   - Document LCP, INP, CLS scores

2. **Google Search Console**:
   - Check Core Web Vitals report after 28 days of data
   - Monitor mobile usability

3. **Lighthouse**:
   - Run in Chrome DevTools
   - Compare before/after scores

**Target Metrics**:
| Metric | Target | Current (estimate) |
|--------|--------|-------------------|
| LCP | <= 2.5s | TBD after testing |
| INP | <= 200ms | Should be good (minimal JS) |
| CLS | <= 0.1 | Should be good (dimensions set) |

---

## Performance Metrics

| Phase | Duration |
|-------|----------|
| Issue Classification | 2m |
| Investigation | 8m |
| Pattern Identification | 3m |
| Validation | 2m |
| Planning | 5m |
| **Total** | **20m** |

---

## Insights & Process Improvements (REQUIRED)

### Issues Encountered During Investigation
1. **Hero image format** - Only JPG exists, no WebP variant. This limits optimization options but preload still helps.
2. **CSS background vs img tag** - Hero uses CSS background-image, so fetchpriority cannot be used. Preload is the correct approach.

### Input Quality Assessment
**Clarity of Original Request**: 4/5
**Missing Information**: None significant - issue was well-defined
**Suggested Input Improvements**: Could specify whether actual PageSpeed scores have been measured as baseline

### Process Improvement Suggestions

**For Future Scout-and-Plan Runs**:
1. Consider checking for existing WebP variants of all critical images early in investigation
2. Add step to verify if any images are inline vs CSS backgrounds

**For Build Agent**:
1. The changes are minimal - just 2 lines added to index.html
2. No React component changes needed
3. Quick verification possible with `npm run build`

**For Overall Workflow**:
1. This type of performance optimization benefits from before/after metrics
2. Consider adding a "post-deployment verification checklist" to the workflow
3. Some optimizations (like WebP conversion) require external tooling not available in this workflow
